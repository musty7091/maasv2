{% extends 'core/base.html' %}

{% block content %}
<div class="mb-4">
    <h3 class="fw-bold text-dark">ğŸ‘‹ HoÅŸ Geldiniz</h3>
    <p class="text-muted">BugÃ¼nÃ¼n Ã–zeti ve HÄ±zlÄ± Ä°ÅŸlemler.</p>
</div>

<div class="row g-3 mb-4">
    <div class="col-md-3 col-6">
        <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%); color: white;">
            <div class="card-body">
                <h5 class="card-title opacity-75">BugÃ¼n Gelen</h5>
                <h2 class="fw-bold mb-0">{{ bugun_gelen }}</h2>
                <small>KiÅŸi Ã§alÄ±ÅŸÄ±yor</small>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-6">
        <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white;">
            <div class="card-body">
                <h5 class="card-title opacity-75">Gelmeyen</h5>
                <h2 class="fw-bold mb-0">{{ gelmeyen }}</h2>
                <small>KiÅŸi yok</small>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-6">
        <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%); color: white;">
            <div class="card-body">
                <h5 class="card-title opacity-75">Personel</h5>
                <h2 class="fw-bold mb-0">{{ toplam_personel }}</h2>
                <small>KayÄ±tlÄ± aktif Ã§alÄ±ÅŸan</small>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-6">
        <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%); color: white;">
            <div class="card-body">
                <h5 class="card-title opacity-75">Bu Ay Avans</h5>
                <h3 class="fw-bold mb-0">{{ bu_ay_avans }} â‚º</h3>
                <small>Toplam daÄŸÄ±tÄ±lan</small>
            </div>
        </div>
    </div>
</div>

<h5 class="fw-bold mb-3">ğŸš€ HÄ±zlÄ± Ä°ÅŸlemler</h5>
<div class="row g-3 mb-4">
    <div class="col-md-3">
        <a href="{% url 'yoklama_al' %}" class="btn btn-dark w-100 py-3 shadow-sm d-flex align-items-center justify-content-center text-decoration-none">
            <span class="fs-4 me-2">ğŸ“</span> 
            <div class="text-start lh-1">
                <span class="d-block fw-bold">Yoklama Al</span>
                <small class="opacity-75" style="font-size: 0.7rem;">{{ bugun|date:"d M" }}</small>
            </div>
        </a>
    </div>
    <div class="col-md-3">
        <a href="{% url 'maas_raporu' %}" class="btn btn-white bg-white w-100 py-3 shadow-sm border d-flex align-items-center justify-content-center text-dark text-decoration-none">
            <span class="fs-4 me-2">ğŸ’°</span> 
            <span class="fw-bold">MaaÅŸ Raporu</span>
        </a>
    </div>
    <div class="col-md-3">
        <a href="{% url 'giris_cikis_raporu' %}" class="btn btn-white bg-white w-100 py-3 shadow-sm border d-flex align-items-center justify-content-center text-dark text-decoration-none">
            <span class="fs-4 me-2">ğŸ“‹</span> 
            <span class="fw-bold">GiriÅŸ/Ã‡Ä±kÄ±ÅŸlar</span>
        </a>
    </div>
    <div class="col-md-3">
        <a href="{% url 'personel_listesi' %}" class="btn btn-white bg-white w-100 py-3 shadow-sm border d-flex align-items-center justify-content-center text-dark text-decoration-none">
            <span class="fs-4 me-2">ğŸ‘¥</span> 
            <span class="fw-bold">Personeller</span>
        </a>
    </div>
</div>

<div class="card border-0 shadow-sm">
    <div class="card-header bg-white py-3">
        <h6 class="m-0 fw-bold text-primary">Son Finansal Hareketler (Avans/Prim)</h6>
    </div>
    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr>
                    <th>Personel</th>
                    <th>Ä°ÅŸlem</th>
                    <th>Tarih</th>
                    <th class="text-end">Tutar</th>
                </tr>
            </thead>
            <tbody>
                {% for hareket in son_hareketler %}
                <tr>
                    <td class="fw-bold">{{ hareket.personel.ad }} {{ hareket.personel.soyad }}</td>
                    <td>
                        {% if hareket.islem_tipi == 'prim' %}
                            <span class="badge bg-success bg-opacity-10 text-success">Prim (Bonus)</span>
                        {% else %}
                            <span class="badge bg-danger bg-opacity-10 text-danger">Kesinti/Avans</span>
                        {% endif %}
                        <small class="text-muted d-block" style="font-size: 0.75rem;">{{ hareket.aciklama|default:"" }}</small>
                    </td>
                    <td class="text-muted">{{ hareket.tarih|date:"d M Y" }}</td>
                    <td class="text-end fw-bold">
                        {% if hareket.islem_tipi == 'prim' %}
                            <span class="text-success">+{{ hareket.tutar }} â‚º</span>
                        {% else %}
                            <span class="text-danger">-{{ hareket.tutar }} â‚º</span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center py-4 text-muted">HenÃ¼z finansal iÅŸlem yok.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div style="height: 50px;"></div>
{% endblock %}